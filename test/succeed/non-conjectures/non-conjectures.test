# --help
../../../dist/build/apia/apia --help
<<<
>>>
Usage: apia [OPTIONS] FILE

           --atp=[online-]NAME                  Set the ATP
                                                (offline ATPs: cvc4, e, equinox, ileancop, metis, spass, vampire or z3)
                                                (online ATPs: run the ‘online-atps --list-atps’ command)
           --check                              Check the syntax of the generated TPTP files using the
                                                tptp4X program from the TPTP library
           --dump-types                         Dump Agda types information to stdout
           --function-constant                  Use a hard-coded binary function symbol for the translation
                                                of functions (required for handling currying)
           --help                               Show this help
  -i DIR   --include-path=DIR                   Look for imports in DIR
  -L LANG  --lang=LANG                          TPTP or SMT-LIB v2 output language (tptp or smt2)
                                                (default: tptp)
           --no-check                           Do not check the syntax of the generated TPTP files using the
                                                tptp4X program from the TPTP library
           --no-config-file                     Omit any configuration file (.apia)
           --no-internal-equality               Do not translate _≡_ to the ATPs equality
           --no-predicate-constants             Do not use hard-coded (n+1)-ary predicate symbols for the
                                                translation of n-ary predicates
           --only-files                         Do not call the ATPs, only to create the TPTP files
           --output-dir=DIR                     Directory in which the TPTP files are placed (default: /tmp)
           --schematic-propositional-functions  Enable translation of universal quantified FOL propositional functions
           --schematic-propositional-symbols    Enable translation of universal quantified FOL propositional symbols
           --snapshot-dir=DIR                   Directory where is the snapshot of the TPTP files
                                                (default: snapshot)
           --snapshot-no-error                  A difference in the snapshot-test does not generate an error
                                                (implies --snapshot-test)
           --snapshot-test                      Compare the generated TPTP files against a snapshot of them
           --time=NUM                           Set timeout for the ATPs in seconds (default: 240)
           --unproven-conjecture-no-error       An unproven TPTP conjecture does not generate an error
  -v N     --verbose=N                          Set verbosity level to N
           --version                            Show version number
           --with-cvc4=PATH                     Give the path to CVC4
           --with-e=PATH                        Give the path to E
           --with-equinox=PATH                  Give the path to Equinox
           --with-ileancop=PATH                 Give the path to IleanCoP
           --with-metis=PATH                    Give the path to Metis
           --with-online-atps=PATH              Give the path to OnlineATPs
           --with-spass=PATH                    Give the path to SPASS
           --with-tptp4X=PATH                   Give the path to tptp4X
           --with-vampire=PATH                  Give the path to Vampire
           --with-z3=PATH                       Give the path to Z3

>>>2
>>>= 0

# --only-files
../../../dist/build/apia/apia --atp=e --only-files TrivialTheorem.agda
<<<
>>>
Created /tmp/TrivialTheorem/20-foo.fof
>>>2
>>>= 0

# --verbose
../../../dist/build/apia/apia --atp=e -v1 --only-files TrivialTheorem.agda
<<<
>>>
Created /tmp/TrivialTheorem/20-foo.fof
>>>2
>>>= 0

# output the version
apia --version | awk '{print substr($0,20)}' > version.txt & git log --format=%h -n 1 > git.txt
<<<
>>>
>>>2
>>>= 0

# version + hash
diff version.txt git.txt
<<<
>>>
>>>2
>>>= 0

# --unproven-conjecture-no-error
../../../dist/build/apia/apia --atp=e --unproven-conjecture-no-error NoTheorem.agda
<<<
>>>
Proving the conjecture in /tmp/NoTheorem/17-foo.fof
E 1.9.1-001 Sungma *did not* prove the conjecture
the ATP(s) did not prove the conjecture in /tmp/NoTheorem/17-foo.fof
>>>2
>>>= 0

# --snapshot-no-error
../../../dist/build/apia/apia --atp=e --only-files --output-dir=/tmp/snapshot TrivialTheorem.agda && sed -i '$ d' /tmp/snapshot/TrivialTheorem/20-foo.fof && ../../../dist/build/apia/apia --atp=e --snapshot-no-error --snapshot-dir=/tmp/snapshot TrivialTheorem.agda
<<<
>>>
Created /tmp/snapshot/TrivialTheorem/20-foo.fof
the files are different:
/tmp/TrivialTheorem/20-foo.fof
/tmp/snapshot/TrivialTheorem/20-foo.fof
>>>2
>>>= 0

# Interface file
agda -v 0 -v "main:50" Foo.agda
<<<
>>>
Interface
  source hash: 16987302680121282013
  imported modules: []
  module name: Foo
  scope: fromList [(Foo,scope Foo
  public
    names
      foo --> [Foo.foo]
)]
  inside scope: ScopeInfo
  current = Foo
  context = TopCtx
  modules
    scope 
    scope Foo
      public
        names
          foo --> [Foo.foo]

  signature: Sig {_sigSections = fromList [(Foo,Section {_secTelescope = EmptyTel})], _sigDefinitions = fromList [(Foo.foo,Defn {defArgInfo = ArgInfo {argInfoHiding = NotHidden, argInfoRelevance = Relevant, argInfoOrigin = UserWritten, argInfoOverlappable = False}, defName = Foo.foo, defType = El {_getSort = Type (Max [ClosedLevel 1]), unEl = Sort (Type (Max []))}, defPolarity = [], defArgOccurrences = [], defDisplay = [], defMutual = MutId 0, defCompiledRep = fromList [], defInstance = Nothing, defCopy = False, defMatchable = False, defNoCompilation = False, defInjective = False, theDef = Axiom {axTPTPRole = Nothing, axTPTPHints = []}})], _sigRewriteRules = fromList []}
  display: fromList []
  builtin: fromList []
  Foreign code: fromList []
  highlighting: CompressedFile {ranges = [(Range {from = 1, to = 79},Aspects {aspect = Just Comment, otherAspects = [], note = Nothing, definitionSite = Nothing}),(Range {from = 80, to = 93},Aspects {aspect = Just Comment, otherAspects = [], note = Nothing, definitionSite = Nothing}),(Range {from = 94, to = 172},Aspects {aspect = Just Comment, otherAspects = [], note = Nothing, definitionSite = Nothing}),(Range {from = 174, to = 177},Aspects {aspect = Just Symbol, otherAspects = [], note = Nothing, definitionSite = Nothing}),(Range {from = 178, to = 185},Aspects {aspect = Just Keyword, otherAspects = [], note = Nothing, definitionSite = Nothing}),(Range {from = 186, to = 199},Aspects {aspect = Just Option, otherAspects = [], note = Nothing, definitionSite = Nothing}),(Range {from = 213, to = 216},Aspects {aspect = Just Symbol, otherAspects = [], note = Nothing, definitionSite = Nothing}),(Range {from = 217, to = 220},Aspects {aspect = Just Symbol, otherAspects = [], note = Nothing, definitionSite = Nothing}),(Range {from = 221, to = 228},Aspects {aspect = Just Keyword, otherAspects = [], note = Nothing, definitionSite = Nothing}),(Range {from = 229, to = 245},Aspects {aspect = Just Option, otherAspects = [], note = Nothing, definitionSite = Nothing}),(Range {from = 256, to = 259},Aspects {aspect = Just Symbol, otherAspects = [], note = Nothing, definitionSite = Nothing}),(Range {from = 260, to = 263},Aspects {aspect = Just Symbol, otherAspects = [], note = Nothing, definitionSite = Nothing}),(Range {from = 264, to = 271},Aspects {aspect = Just Keyword, otherAspects = [], note = Nothing, definitionSite = Nothing}),(Range {from = 272, to = 298},Aspects {aspect = Just Option, otherAspects = [], note = Nothing, definitionSite = Nothing}),(Range {from = 299, to = 302},Aspects {aspect = Just Symbol, otherAspects = [], note = Nothing, definitionSite = Nothing}),(Range {from = 303, to = 306},Aspects {aspect = Just Symbol, otherAspects = [], note = Nothing, definitionSite = Nothing}),(Range {from = 307, to = 314},Aspects {aspect = Just Keyword, otherAspects = [], note = Nothing, definitionSite = Nothing}),(Range {from = 315, to = 326},Aspects {aspect = Just Option, otherAspects = [], note = Nothing, definitionSite = Nothing}),(Range {from = 342, to = 345},Aspects {aspect = Just Symbol, otherAspects = [], note = Nothing, definitionSite = Nothing}),(Range {from = 347, to = 353},Aspects {aspect = Just Keyword, otherAspects = [], note = Nothing, definitionSite = Nothing}),(Range {from = 354, to = 357},Aspects {aspect = Just (Name (Just Module) False), otherAspects = [], note = Nothing, definitionSite = Just (TopLevelModuleName {moduleNameRange = , moduleNameParts = ["Foo"]},1)}),(Range {from = 358, to = 363},Aspects {aspect = Just Keyword, otherAspects = [], note = Nothing, definitionSite = Nothing}),(Range {from = 365, to = 374},Aspects {aspect = Just Keyword, otherAspects = [], note = Nothing, definitionSite = Nothing}),(Range {from = 375, to = 378},Aspects {aspect = Just (Name (Just Postulate) False), otherAspects = [], note = Nothing, definitionSite = Just (TopLevelModuleName {moduleNameRange = , moduleNameParts = ["Foo"]},375)}),(Range {from = 379, to = 380},Aspects {aspect = Just Symbol, otherAspects = [], note = Nothing, definitionSite = Nothing}),(Range {from = 381, to = 384},Aspects {aspect = Just PrimitiveType, otherAspects = [], note = Nothing, definitionSite = Nothing})]}
  pragma options: [["--exact-split"],["--no-sized-types"],["--no-universe-polymorphism"],["--without-K"]]
  pattern syns: fromList []
  warnings: []
>>>2
>>>= 0

# --dump-types
../../../dist/build/apia/apia --dump-types Foo.agda
<<<
>>>
Qname: Foo.foo
Type: El {_getSort = Type (Max [ClosedLevel 1]), unEl = Sort (Type (Max []))}

>>>2
>>>= 0

# Issue #18
../../../dist/build/apia/apia --dump-types Issue18.agda
<<<
>>>
Qname: Issue18._,_
Type: El {_getSort = Type (Max [ClosedLevel 1]), unEl = Pi ru{El {_getSort = Type (Max [ClosedLevel 1]), unEl = Pi ru(El {_getSort = Type (Max []), unEl = Def Issue18.D []}) (NoAbs "_" El {_getSort = Type (Max [ClosedLevel 1]), unEl = Sort (Type (Max []))})}} (Abs "A" El {_getSort = Type (Max []), unEl = Pi ru(El {_getSort = Type (Max []), unEl = Def Issue18.∃ [Apply ru(Var 0 [])]}) (Abs "d" El {_getSort = Type (Max []), unEl = Def Issue18.D []})})}

Qname: Issue18.D
Type: El {_getSort = Type (Max [ClosedLevel 1]), unEl = Sort (Type (Max []))}

Qname: Issue18.∃
Type: El {_getSort = Type (Max [ClosedLevel 1]), unEl = Pi ru(El {_getSort = Type (Max [ClosedLevel 1]), unEl = Pi ru(El {_getSort = Type (Max []), unEl = Def Issue18.D []}) (NoAbs "_" El {_getSort = Type (Max [ClosedLevel 1]), unEl = Sort (Type (Max []))})}) (NoAbs "A" El {_getSort = Type (Max [ClosedLevel 1]), unEl = Sort (Type (Max []))})}

Qname: Issue18.∃
Type: El {_getSort = Inf, unEl = Pi ru{El {_getSort = Inf, unEl = Pi ru(El {_getSort = Inf, unEl = Def Agda.Primitive.CubicalPrimitives.I []}) (Abs "i" El {_getSort = Type (Max [ClosedLevel 1]), unEl = Pi ru(El {_getSort = Type (Max []), unEl = Def Issue18.D []}) (NoAbs "_" El {_getSort = Type (Max [ClosedLevel 1]), unEl = Sort (Type (Max []))})})}} (Abs "A" El {_getSort = Inf, unEl = Pi ru(El {_getSort = Inf, unEl = Def Agda.Primitive.CubicalPrimitives.I []}) (Abs "phi" El {_getSort = Inf, unEl = Pi ru(El {_getSort = Inf, unEl = Pi ru(El {_getSort = Inf, unEl = Def Agda.Primitive.CubicalPrimitives.I []}) (Abs "i" El {_getSort = Inf, unEl = Pi .u(El {_getSort = Inf, unEl = Def Agda.Primitive.CubicalPrimitives.IsOne [Apply ru(Var 1 [])]}) (Abs "o" El {_getSort = Type (Max []), unEl = Def Issue18.∃ [Apply ru(Var 3 [Apply ru(Var 1 [])])]})})}) (NoAbs "_" El {_getSort = Type (Max []), unEl = Pi ru(El {_getSort = Type (Max []), unEl = Def Issue18.∃ [Apply ru(Var 1 [Apply ru(Con Agda.Primitive.CubicalPrimitives.i0(inductive)[] ConOSystem [])])]}) (NoAbs "_" El {_getSort = Type (Max []), unEl = Def Issue18.∃ [Apply ru(Var 1 [Apply ru(Con Agda.Primitive.CubicalPrimitives.i1(inductive)[] ConOSystem [])])]})})})})}

Qname: Issue18._,_
Type: El {_getSort = Type (Max [ClosedLevel 1]), unEl = Pi ru{El {_getSort = Type (Max [ClosedLevel 1]), unEl = Pi ru(El {_getSort = Type (Max []), unEl = Def Issue18.D []}) (NoAbs "_" El {_getSort = Type (Max [ClosedLevel 1]), unEl = Sort (Type (Max []))})}} (Abs "A" El {_getSort = Type (Max []), unEl = Pi ru(El {_getSort = Type (Max []), unEl = Def Issue18.∃ [Apply ru(Var 0 [])]}) (Abs "d" El {_getSort = Type (Max []), unEl = Var 1 [Apply ru(Def Issue18._,_ [Apply ru(Var 0 [])])]})})}

Qname: Issue18.∃._,_
Type: El {_getSort = Type (Max [ClosedLevel 1]), unEl = Pi ru{El {_getSort = Type (Max [ClosedLevel 1]), unEl = Pi ru(El {_getSort = Type (Max []), unEl = Def Issue18.D []}) (NoAbs "_" El {_getSort = Type (Max [ClosedLevel 1]), unEl = Sort (Type (Max []))})}} (Abs "A" El {_getSort = Type (Max []), unEl = Pi ru(El {_getSort = Type (Max []), unEl = Def Issue18.D []}) (Abs "witness" El {_getSort = Type (Max []), unEl = Pi ru(El {_getSort = Type (Max []), unEl = Var 1 [Apply ru(Var 0 [])]}) (NoAbs "_" El {_getSort = Type (Max []), unEl = Def Issue18.∃ [Apply ru(Var 1 [])]})})})}

>>>2
>>>= 0

# Test case for the on-line ATPs (Issue #68)
../../../dist/build/apia/apia --atp=online-e TrivialTheorem.agda
<<<
>>>
Proving the conjecture in /tmp/TrivialTheorem/20-foo.fof
E---2.0 proved the conjecture
>>>2
>>>= 0

# Warning: NoATPsProofWarn
agda -v0 NoTheorem.agda && ../../../dist/build/apia/apia --atp=e --unproven-conjecture-no-error NoTheorem.agda
<<<
>>>
Proving the conjecture in /tmp/NoTheorem/17-foo.fof
E 1.9.1-001 Sungma *did not* prove the conjecture
the ATP(s) did not prove the conjecture in /tmp/NoTheorem/17-foo.fof
>>>2
>>>= 0

# Warning: SnapshotDifferentFilesWarn
agda -v0 TrivialTheorem.agda && ../../../dist/build/apia/apia --atp=e --only-files --output-dir=/tmp/snapshot TrivialTheorem.agda && sed -i '$ d' /tmp/snapshot/TrivialTheorem/20-foo.fof && ../../../dist/build/apia/apia --atp=e --snapshot-test --snapshot-dir=/tmp/snapshot --snapshot-no-error TrivialTheorem.agda
<<<
>>>
Created /tmp/snapshot/TrivialTheorem/20-foo.fof
the files are different:
/tmp/TrivialTheorem/20-foo.fof
/tmp/snapshot/TrivialTheorem/20-foo.fof
>>>2
>>>= 0
